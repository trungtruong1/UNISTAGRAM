{"ast":null,"code":"var _jsxFileName = \"/home/kurone/unist/se/UNISTAGRAM/src/main/frontend/src/pages/play.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport Container from 'react-bootstrap/Container';\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card';\nimport Modal from 'react-bootstrap/Modal';\nimport { Link, useParams } from \"react-router-dom\";\nimport { Col, ListGroup, ListGroupItem, Row, Form, Footer } from 'react-bootstrap';\nimport NavBar from '../components/navbar';\nimport Profile from '../components/profile';\nimport ProblemList from '../components/problem_list';\nimport Ranking from '../components/ranking';\nimport useToken from '../useTokens';\nimport { useEffect, useRef, useState } from 'react';\nimport Board from '../components/chess_board';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ViewPlayOption() {\n  _s();\n\n  const {\n    token,\n    setToken\n  } = useToken();\n  const [showCustom, setshowCustom] = useState(false);\n  const [showFindMatch, setshowFindMatch] = useState(false);\n  const [showBot, setshowBot] = useState(false);\n  const [matchID, setMatchID] = useState(0);\n  const socket = useRef({});\n\n  const handleCustom = () => setshowCustom(true);\n\n  const handleCancelCustom = () => setshowCustom(false);\n\n  const handleFindingMatch = () => setshowFindMatch(true);\n\n  const handleCancelFinding = () => setshowFindMatch(false);\n\n  const handleBot = () => setshowBot(true);\n\n  const handleCancelBot = () => setshowBot(false);\n\n  const handleCreateRoom = async e => {\n    e.preventDefault();\n    const res = await fetch(`http://localhost:8000/api/match/add/`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username: token.username\n      })\n    });\n    const data = await res.json();\n\n    if (data.status === \"failed\") {\n      alert(data.reason);\n      window.location.reload();\n      return;\n    }\n\n    alert(\"Successful\");\n    window.location.reload();\n  };\n\n  const handleMatchIDChange = e => setMatchID(e.target.value);\n\n  const handleJoinRoom = async e => {\n    e.preventDefault();\n    console.log(token);\n    socket.join = new WebSocket(`ws://localhost:8000/ws/join/${matchID}/`);\n\n    socket.join.onmessage = function (e) {\n      const data = JSON.parse(e.data);\n      if (data.player === token.username) return;\n      window.location.reload();\n    };\n\n    socket.join.onclose = function (e) {\n      console.error('Chat socket closed unexpectedly');\n    };\n\n    const res = await fetch(`http://localhost:8000/api/match/join/`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username: token.username,\n        password: token.password,\n        match_id: matchID\n      })\n    });\n    const data = await res.json();\n\n    if (data.status === \"failed\") {\n      alert(data.reason);\n      window.location.reload();\n      return;\n    }\n\n    socket.join.send(JSON.stringify({\n      'player': token.username\n    }));\n    alert(\"Successful\");\n    window.location.reload();\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      show: showCustom,\n      onHide: handleCancelCustom,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Custom match\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(Form, {\n              onSubmit: handleCreateRoom,\n              children: /*#__PURE__*/_jsxDEV(\"center\", {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  style: {\n                    marginTop: \"10%\"\n                  },\n                  variant: \"primary\",\n                  type: \"submit\",\n                  children: \"Create custom room\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            sm: 6,\n            children: /*#__PURE__*/_jsxDEV(Form, {\n              onSubmit: handleJoinRoom,\n              children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"mb-3\",\n                controlId: \"formBasicUsername\",\n                children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                  onChange: handleMatchIDChange,\n                  type: \"number\",\n                  placeholder: \"Enter ID\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"center\", {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"primary\",\n                  type: \"submit\",\n                  children: \"Join\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showFindMatch,\n      onHide: handleCancelFinding,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Finding a match...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"danger\",\n          onClick: handleCancelFinding,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showBot,\n      onHide: handleCancelBot,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Play with bot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"danger\",\n          onClick: handleCancelBot,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          sm: 9,\n          children: [/*#__PURE__*/_jsxDEV(\"center\", {\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              children: \"Play\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              sm: 4,\n              children: /*#__PURE__*/_jsxDEV(\"center\", {\n                children: /*#__PURE__*/_jsxDEV(Card, {\n                  style: {\n                    width: \"40%\",\n                    height: \"5rem\"\n                  },\n                  onClick: handleCustom,\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"success\",\n                    style: {\n                      height: \"100%\"\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"Custom match\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 171,\n                      columnNumber: 88\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              sm: 4,\n              children: /*#__PURE__*/_jsxDEV(\"center\", {\n                children: /*#__PURE__*/_jsxDEV(Card, {\n                  style: {\n                    width: \"40%\",\n                    height: \"5rem\"\n                  },\n                  onClick: handleFindingMatch,\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"success\",\n                    style: {\n                      height: \"100%\"\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"Random matching\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 178,\n                      columnNumber: 88\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              sm: 4,\n              children: /*#__PURE__*/_jsxDEV(\"center\", {\n                children: /*#__PURE__*/_jsxDEV(Card, {\n                  style: {\n                    width: \"40%\",\n                    height: \"5rem\"\n                  },\n                  onClick: handleBot,\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"success\",\n                    style: {\n                      height: \"100%\"\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"Play with bots\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 185,\n                      columnNumber: 88\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 185,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          sm: 3,\n          children: [/*#__PURE__*/_jsxDEV(Profile, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Ranking, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ViewPlayOption, \"503b2TquMVI1FL8KxNwtLcNTtdE=\", false, function () {\n  return [useToken];\n});\n\n_c = ViewPlayOption;\n\nfunction ShowBoard(_ref) {\n  _s2();\n\n  let {\n    userInfo\n  } = _ref;\n  const GACHA_PRICE = 7;\n  const {\n    token,\n    setToken\n  } = useToken();\n  const [info, setInfo] = useState({});\n  const [matchInfo, setMatchInfo] = useState({\n    my_pocket: {}\n  });\n  const socket = useRef({});\n  const randomPiece = useRef({});\n  let selectPieceState = {};\n  [selectPieceState.n, selectPieceState.setn] = useState({\n    state: false,\n    number: 0\n  });\n  [selectPieceState.b, selectPieceState.setb] = useState({\n    state: false,\n    number: 0\n  });\n  [selectPieceState.r, selectPieceState.setr] = useState({\n    state: false,\n    number: 0\n  });\n  [selectPieceState.q, selectPieceState.setq] = useState({\n    state: false,\n    number: 0\n  });\n  useEffect(() => {\n    let ignore = false;\n\n    async function fetchData() {\n      if (!token) return;\n      if (ignore) return;\n      if (!userInfo.in_game) return;\n      const match = await fetch(`http://localhost:8000/api/match/${userInfo.in_game}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const match_data = await match.json();\n      const white_player = await (await fetch(match_data.white_player, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      })).json();\n      const black_player = match_data.black_player ? await (await fetch(match_data.black_player, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      })).json() : null;\n      setMatchInfo({\n        id: match_data.id,\n        fen: match_data.fen,\n        white_player: white_player.username,\n        white_points: match_data.white_points,\n        white_elo: white_player.elo,\n        black_player: black_player ? black_player.username : null,\n        black_points: match_data.black_points,\n        black_elo: black_player ? black_player.elo : null,\n        my_points: token.username === white_player.username ? match_data.white_points : match_data.black_points,\n        my_pocket: token.username === white_player.username ? match_data.white_pocket : match_data.black_pocket\n      });\n      const my_pocket = token.username === white_player.username ? match_data.white_pocket : match_data.black_pocket;\n\n      for (const key of Object.keys(my_pocket)) {\n        selectPieceState[`set${key}`]({\n          state: my_pocket[key] === 0,\n          number: my_pocket[key]\n        });\n      } // Initialize WebSocket\n\n\n      socket.resign = new WebSocket(`ws://localhost:8000/ws/resign/${match_data.id}/`);\n      socket.join = new WebSocket(`ws://localhost:8000/ws/join/${match_data.id}/`);\n      socket.roll = new WebSocket(`ws://localhost:8000/ws/roll/${match_data.id}/`);\n      console.log(socket); // Player joins the match\n\n      socket.join.onmessage = function (e) {\n        const data = JSON.parse(e.data);\n        if (data.player === token.username) return;\n        window.location.reload();\n      };\n\n      socket.join.onclose = function (e) {\n        console.error('Chat socket closed unexpectedly');\n      }; // Player resigns\n\n\n      socket.resign.onmessage = function (e) {\n        const data = JSON.parse(e.data);\n        if (data.player === token.username) return;\n        alert(\"Your opponent resigns\");\n        window.location.reload();\n      };\n\n      socket.resign.onclose = function (e) {\n        console.error('Chat socket closed unexpectedly');\n      }; // Player rolls a random piece\n\n\n      socket.roll.onmessage = function (e) {\n        const data = JSON.parse(e.data);\n        if (data.status === \"failed\") return;\n\n        if (data.player === token.username) {\n          document.getElementById(\"my_points\").textContent = `Your Points: ${data.my_points}`;\n          matchInfo.my_points = data.my_points;\n          selectPieceState[`${data.piece}`].number = data.pocket;\n          selectPieceState[`${data.piece}`].state = false;\n          const new_state = {\n            state: false,\n            number: selectPieceState[`${data.piece}`].number\n          };\n          console.log(new_state);\n          selectPieceState[`set${data.piece}`](new_state);\n          console.log(selectPieceState);\n        } else {\n          console.log(\"Your opponent rolls a random piece\");\n        }\n      };\n\n      socket.roll.onclose = function (e) {\n        console.error('Chat socket closed unexpectedly');\n      };\n    }\n\n    fetchData();\n    return () => {\n      ignore = true;\n    };\n  }, []);\n\n  const resign = async e => {\n    const res = await fetch(`http://localhost:8000/api/match/resign/`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username: token.username,\n        password: token.password,\n        match_id: matchInfo.id\n      })\n    });\n    const data = await res.json();\n\n    if (data.status === \"failed\") {\n      alert(data.reason);\n      window.location.reload();\n      return;\n    }\n\n    socket.resign.send(JSON.stringify({\n      'player': token.username\n    }));\n    alert(\"Successful\");\n    window.location.reload();\n  };\n\n  const rollRandomPiece = e => {\n    if (matchInfo.my_points < GACHA_PRICE) return;\n    socket.roll.send(JSON.stringify({\n      'player': token.username\n    }));\n  };\n\n  const handle_pick_piece = e => {\n    randomPiece.selected_piece = e.target.getAttribute(\"data-piece\");\n    document.getElementById(\"selected_piece\").textContent = `You are picking ${randomPiece.selected_piece}`;\n  };\n\n  const handle_cancel_select = e => {\n    randomPiece.selected_piece = null;\n    document.getElementById(\"selected_piece\").textContent = `You are not picking`;\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          id: \"board_area\",\n          sm: 8,\n          children: matchInfo.black_player ? /*#__PURE__*/_jsxDEV(Board, {\n            selectPieceState: selectPieceState,\n            matchInfo: matchInfo,\n            userInfo: userInfo,\n            randomPiece: randomPiece\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 33\n          }, this) : /*#__PURE__*/_jsxDEV(\"center\", {\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Waiting for another player...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          sm: 4,\n          children: [/*#__PURE__*/_jsxDEV(Card, {\n            style: {\n              width: \"70%\",\n              margin: '10px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n              children: [\"Match ID: \", matchInfo.id, /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"danger\",\n                style: {\n                  float: \"right\"\n                },\n                onClick: resign,\n                children: /*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Resign\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 393,\n                  columnNumber: 101\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n              children: [/*#__PURE__*/_jsxDEV(Card.Text, {\n                children: [\" White player: \", matchInfo.white_player, \" (\", matchInfo.white_elo, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                children: [\" Black player: \", matchInfo.black_player, \" (\", matchInfo.black_elo, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                id: \"status\",\n                children: \" Status: white to move \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"center\", {\n                children: [/*#__PURE__*/_jsxDEV(Card.Text, {\n                  id: \"my_points\",\n                  children: [\" Your Points: \", matchInfo.my_points, \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 400,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  id: \"roll_button\",\n                  onClick: rollRandomPiece,\n                  children: \"Roll\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 401,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                style: {\n                  fontSize: \"small\"\n                },\n                children: \" Win (+102) / Lose (-13) / Draw (-1) \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Card, {\n            style: {\n              width: \"70%\",\n              height: \"20rem\",\n              margin: '10px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n              children: /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  sm: 8,\n                  id: \"selected_piece\",\n                  children: \"You are not picking\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  sm: 4,\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"danger\",\n                    style: {\n                      float: \"right\"\n                    },\n                    onClick: handle_cancel_select,\n                    children: /*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"Cancel\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 415,\n                      columnNumber: 119\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 415,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 414,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n              style: {\n                overflow: \"auto\"\n              },\n              children: [Object.keys(matchInfo.my_pocket).map((key, id) => {\n                return /*#__PURE__*/_jsxDEV(Card.Text, {\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    \"data-piece\": key,\n                    \"data-number\": selectPieceState[`${key}`].number,\n                    disabled: selectPieceState[`${key}`].state,\n                    onClick: handle_pick_piece,\n                    children: [key, \": \", selectPieceState[`${key}`].number]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 425,\n                    columnNumber: 49\n                  }, this)\n                }, id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 424,\n                  columnNumber: 45\n                }, this);\n              }), /*#__PURE__*/_jsxDEV(Card.Text, {\n                id: \"roll status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s2(ShowBoard, \"Ce+txh0DM6xqn4WwTCPNkm4qAYY=\", false, function () {\n  return [useToken];\n});\n\n_c2 = ShowBoard;\n\nfunction Play() {\n  _s3();\n\n  const {\n    token,\n    setToken\n  } = useToken();\n  const [info, setInfo] = useState({});\n  const [matchInfo, setMatchInfo] = useState({});\n  useEffect(() => {\n    let ignore = false;\n\n    async function fetchData() {\n      if (!token) return;\n      if (ignore) return;\n      const user = await fetch(`http://localhost:8000/api/user/getinfo/?username=${token.username}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const user_data = await user.json();\n      setInfo({\n        username: user_data.username,\n        in_game: user_data.in_game,\n        number_of_matches: user_data.number_of_matches,\n        elo: user_data.elo\n      });\n    }\n\n    fetchData();\n    return () => {\n      ignore = true;\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: info.in_game ? /*#__PURE__*/_jsxDEV(ShowBoard, {\n      userInfo: info\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(ViewPlayOption, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 21\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 476,\n    columnNumber: 9\n  }, this);\n}\n\n_s3(Play, \"+iMGVPSuw2myq3daD4DG7yuco0g=\", false, function () {\n  return [useToken];\n});\n\n_c3 = Play;\nexport default Play;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"ViewPlayOption\");\n$RefreshReg$(_c2, \"ShowBoard\");\n$RefreshReg$(_c3, \"Play\");","map":{"version":3,"names":["Container","Button","Card","Modal","Link","useParams","Col","ListGroup","ListGroupItem","Row","Form","Footer","NavBar","Profile","ProblemList","Ranking","useToken","useEffect","useRef","useState","Board","ViewPlayOption","token","setToken","showCustom","setshowCustom","showFindMatch","setshowFindMatch","showBot","setshowBot","matchID","setMatchID","socket","handleCustom","handleCancelCustom","handleFindingMatch","handleCancelFinding","handleBot","handleCancelBot","handleCreateRoom","e","preventDefault","res","fetch","method","headers","body","JSON","stringify","username","data","json","status","alert","reason","window","location","reload","handleMatchIDChange","target","value","handleJoinRoom","console","log","join","WebSocket","onmessage","parse","player","onclose","error","password","match_id","send","marginTop","width","height","ShowBoard","userInfo","GACHA_PRICE","info","setInfo","matchInfo","setMatchInfo","my_pocket","randomPiece","selectPieceState","n","setn","state","number","b","setb","r","setr","q","setq","ignore","fetchData","in_game","match","match_data","white_player","black_player","id","fen","white_points","white_elo","elo","black_points","black_elo","my_points","white_pocket","black_pocket","key","Object","keys","resign","roll","document","getElementById","textContent","piece","pocket","new_state","rollRandomPiece","handle_pick_piece","selected_piece","getAttribute","handle_cancel_select","margin","float","fontSize","overflow","map","Play","user","user_data","number_of_matches"],"sources":["/home/kurone/unist/se/UNISTAGRAM/src/main/frontend/src/pages/play.js"],"sourcesContent":["import Container from 'react-bootstrap/Container';\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card';\nimport Modal from 'react-bootstrap/Modal';\nimport { Link, useParams } from \"react-router-dom\";\nimport { Col, ListGroup, ListGroupItem, Row, Form, Footer } from 'react-bootstrap';\nimport NavBar from '../components/navbar';\nimport Profile from '../components/profile';\nimport ProblemList from '../components/problem_list';\nimport Ranking from '../components/ranking';\nimport useToken from '../useTokens';\nimport { useEffect, useRef, useState } from 'react';\nimport Board from '../components/chess_board';\n\n\nfunction ViewPlayOption() {\n\n    const { token, setToken } = useToken();\n\n    const [showCustom, setshowCustom] = useState(false);\n    const [showFindMatch, setshowFindMatch] = useState(false);\n    const [showBot, setshowBot] = useState(false);\n    const [matchID, setMatchID] = useState(0);\n    const socket = useRef({});\n\n    const handleCustom = () => setshowCustom(true);\n    const handleCancelCustom = () => setshowCustom(false);\n\n    const handleFindingMatch = () => setshowFindMatch(true);\n    const handleCancelFinding = () => setshowFindMatch(false);\n\n    const handleBot = () => setshowBot(true);\n    const handleCancelBot = () => setshowBot(false);\n\n    const handleCreateRoom = async (e) => {\n        e.preventDefault();\n        const res = await fetch(`http://localhost:8000/api/match/add/`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                username: token.username\n            })\n        });\n        const data = await res.json();\n\n        if(data.status === \"failed\") {\n            alert(data.reason);\n            window.location.reload();\n            return;\n        }\n        alert(\"Successful\");\n        window.location.reload();\n    }\n\n    const handleMatchIDChange = (e) => setMatchID(e.target.value);\n\n    const handleJoinRoom = async (e) => {\n        e.preventDefault();\n        console.log(token);\n        socket.join = new WebSocket(`ws://localhost:8000/ws/join/${matchID}/`);\n        socket.join.onmessage = function(e) {\n            const data = JSON.parse(e.data);\n            if(data.player === token.username) return;\n            window.location.reload();\n        };\n    \n        socket.join.onclose = function(e) {\n            console.error('Chat socket closed unexpectedly');\n        };\n\n        const res = await fetch(`http://localhost:8000/api/match/join/`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                username: token.username,\n                password: token.password,\n                match_id: matchID\n            })\n        });\n        const data = await res.json();\n\n        if(data.status === \"failed\") {\n            alert(data.reason);\n            window.location.reload();\n            return;\n        }\n\n        socket.join.send(JSON.stringify({\n            'player': token.username\n        }));\n\n        alert(\"Successful\");\n        window.location.reload();\n    }\n\n    return (\n        <>\n            <Modal show={showCustom} onHide={handleCancelCustom}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Custom match</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <Row>\n                        <Col sm={6}>\n                            <Form onSubmit={handleCreateRoom}>\n                                <center>\n                                    <Button style={{marginTop: \"10%\"}} variant=\"primary\" type=\"submit\">\n                                        Create custom room\n                                    </Button>\n                                </center>\n                            </Form>\n                        </Col>\n\n                        <Col sm={6}>\n                            <Form onSubmit={handleJoinRoom}>\n                                <Form.Group className=\"mb-3\" controlId=\"formBasicUsername\">\n                                    <Form.Control onChange={handleMatchIDChange} type=\"number\" placeholder=\"Enter ID\" />\n                                </Form.Group>\n                                <center>\n                                    <Button variant=\"primary\" type=\"submit\">\n                                        Join\n                                    </Button>\n                                </center>\n                            </Form>\n                        </Col>\n                        \n                    </Row>\n                </Modal.Body>\n            </Modal>\n\n            <Modal show={showFindMatch} onHide={handleCancelFinding}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Finding a match...</Modal.Title>\n                </Modal.Header>\n                <Modal.Footer>\n                    <Button variant=\"danger\" onClick={handleCancelFinding}>\n                        Cancel\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n\n            <Modal show={showBot} onHide={handleCancelBot}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Play with bot</Modal.Title>\n                </Modal.Header>\n                <Modal.Footer>\n                    <Button variant=\"danger\" onClick={handleCancelBot}>\n                        Cancel\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n\n            <NavBar/>\n\n            <br/>\n\n            <Container>\n                <Row>\n                    <Col sm={9}>\n                        <center>\n                            <h1>Play</h1>\n                        </center>\n                        <Row>\n                            <Col sm={4}>\n                                <center>\n                                <Card style={{ width: \"40%\", height: \"5rem\" }} onClick={handleCustom}>\n                                    <Button variant=\"success\" style={{height: \"100%\"}}><b>Custom match</b></Button>\n                                </Card>\n                                </center>\n                            </Col>\n                            <Col sm={4}>\n                                <center>\n                                <Card style={{ width: \"40%\", height: \"5rem\" }} onClick={handleFindingMatch}>\n                                    <Button variant=\"success\" style={{height: \"100%\"}}><b>Random matching</b></Button>\n                                </Card>\n                                </center>\n                            </Col>\n                            <Col sm={4}>\n                                <center>\n                                <Card style={{ width: \"40%\", height: \"5rem\" }} onClick={handleBot}>\n                                    <Button variant=\"success\" style={{height: \"100%\"}}><b>Play with bots</b></Button>\n                                </Card>\n                                </center>\n                            </Col>\n                        </Row>\n                    </Col>\n\n                    <Col sm={3}>\n                        <Profile/>\n                        <Ranking/>\n                    </Col>\n                </Row>\n                \n            </Container>\n        </>\n    );\n}\n\nfunction ShowBoard({userInfo}) {\n    \n    const GACHA_PRICE = 7;\n    const { token, setToken } = useToken();\n    const [info, setInfo] = useState({});\n    const [matchInfo, setMatchInfo] = useState({my_pocket: {}});\n    const socket = useRef({});\n    const randomPiece = useRef({});\n\n    let selectPieceState = {};\n    [selectPieceState.n, selectPieceState.setn] = useState({state: false, number: 0});\n    [selectPieceState.b, selectPieceState.setb] = useState({state: false, number: 0});\n    [selectPieceState.r, selectPieceState.setr] = useState({state: false, number: 0});\n    [selectPieceState.q, selectPieceState.setq] = useState({state: false, number: 0});\n\n    useEffect(() => {\n        let ignore = false;\n        async function fetchData() {\n            if(!token) return;\n            if(ignore) return;\n            if(!userInfo.in_game) return;\n\n            const match = await fetch(`http://localhost:8000/api/match/${userInfo.in_game}`, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n            const match_data = await match.json();\n            const white_player = await (await fetch(match_data.white_player, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            })).json();\n\n            const black_player = (match_data.black_player)? await (await fetch(match_data.black_player, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            })).json() : null;\n\n            setMatchInfo({\n                id: match_data.id,\n                fen: match_data.fen,\n                white_player: white_player.username,\n                white_points: match_data.white_points,\n                white_elo: white_player.elo,\n                black_player: (black_player)? black_player.username : null,\n                black_points: match_data.black_points,\n                black_elo: (black_player)? black_player.elo : null,\n                my_points: (token.username === white_player.username)? match_data.white_points : match_data.black_points,\n                my_pocket: (token.username === white_player.username)? match_data.white_pocket : match_data.black_pocket,\n            });\n\n            const my_pocket = (token.username === white_player.username)? match_data.white_pocket : match_data.black_pocket;\n            for(const key of Object.keys(my_pocket)) {\n                selectPieceState[`set${key}`]({state: my_pocket[key] === 0, number: my_pocket[key]});\n            }\n\n            // Initialize WebSocket\n\n            socket.resign = new WebSocket(`ws://localhost:8000/ws/resign/${match_data.id}/`);\n            socket.join = new WebSocket(`ws://localhost:8000/ws/join/${match_data.id}/`);\n            socket.roll = new WebSocket(`ws://localhost:8000/ws/roll/${match_data.id}/`);\n\n            console.log(socket);\n\n            // Player joins the match\n            socket.join.onmessage = function(e) {\n                const data = JSON.parse(e.data);\n                if(data.player === token.username) return;\n                window.location.reload();\n            };\n        \n            socket.join.onclose = function(e) {\n                console.error('Chat socket closed unexpectedly');\n            };\n\n            // Player resigns\n            socket.resign.onmessage = function(e) {\n                const data = JSON.parse(e.data);\n                if(data.player === token.username) return;\n                alert(\"Your opponent resigns\");\n                window.location.reload();\n            };\n        \n            socket.resign.onclose = function(e) {\n                console.error('Chat socket closed unexpectedly');\n            };\n\n            // Player rolls a random piece\n            socket.roll.onmessage = function(e) {\n                const data = JSON.parse(e.data);\n                if(data.status === \"failed\") return;\n                if(data.player === token.username) {\n                    document.getElementById(\"my_points\").textContent = `Your Points: ${data.my_points}`;\n                    matchInfo.my_points = data.my_points;\n                    \n                    selectPieceState[`${data.piece}`].number = data.pocket;\n                    selectPieceState[`${data.piece}`].state = false;\n                    const new_state = {state: false, number: selectPieceState[`${data.piece}`].number};\n                    console.log(new_state);\n                    selectPieceState[`set${data.piece}`](new_state);\n\n                    console.log(selectPieceState);\n\n                } else {\n                    console.log(\"Your opponent rolls a random piece\");\n                }\n            };\n        \n            socket.roll.onclose = function(e) {\n                console.error('Chat socket closed unexpectedly');\n            };\n            \n        }\n\n        fetchData();\n        return () => { ignore = true; }        \n    }, []);\n    \n\n    const resign = async (e) => {\n        const res = await fetch(`http://localhost:8000/api/match/resign/`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                username: token.username,\n                password: token.password,\n                match_id: matchInfo.id\n            })\n        });\n        const data = await res.json();\n\n        if(data.status === \"failed\") {\n            alert(data.reason);\n            window.location.reload();\n            return;\n        }\n        socket.resign.send(JSON.stringify({\n            'player': token.username\n        }));\n        alert(\"Successful\");\n        window.location.reload();\n    }\n\n    const rollRandomPiece = (e) => {\n        if(matchInfo.my_points < GACHA_PRICE) return;\n        socket.roll.send(JSON.stringify({\n            'player': token.username\n        }));\n    }\n\n    const handle_pick_piece = (e) => {\n        randomPiece.selected_piece = e.target.getAttribute(\"data-piece\");\n        document.getElementById(\"selected_piece\").textContent = `You are picking ${randomPiece.selected_piece}`;\n    }\n\n    const handle_cancel_select = (e) => {\n        randomPiece.selected_piece = null;\n        document.getElementById(\"selected_piece\").textContent = `You are not picking`;\n    }\n\n    return (\n        <>\n            <NavBar/>\n\n            <br/>\n\n            <Container>\n                <Row>\n                    <Col id=\"board_area\" sm={8}>\n                        {\n                            (matchInfo.black_player)? \n                                <Board selectPieceState={selectPieceState} matchInfo={matchInfo} userInfo={userInfo} randomPiece={randomPiece}/>\n                            :\n                                <center>\n                                    <h3>Waiting for another player...</h3>\n                                </center>\n                        }\n                    </Col>\n\n                    <Col sm={4}>\n                        <Card style={{ width: \"70%\", margin: '10px' }} >\n                            <Card.Header>\n                                Match ID: {matchInfo.id}\n                                <Button variant=\"danger\" style={{ float: \"right\"}} onClick={resign}><b>Resign</b></Button>\n                            </Card.Header>\n                            <Card.Body>\n                                <Card.Text> White player: {matchInfo.white_player} ({matchInfo.white_elo})</Card.Text>\n                                <Card.Text> Black player: {matchInfo.black_player} ({matchInfo.black_elo})</Card.Text> \n                                <Card.Text id=\"status\"> Status: white to move </Card.Text> \n                                <center>\n                                    <Card.Text id=\"my_points\"> Your Points: {matchInfo.my_points} </Card.Text>\n                                    <Button id=\"roll_button\" onClick={rollRandomPiece}>Roll</Button>\n                                </center>\n                                <br></br>\n                                <Card.Text style={{ fontSize: \"small\" }}> Win (+102) / Lose (-13) / Draw (-1) </Card.Text> \n                            </Card.Body>\n                        </Card>\n\n                        <Card style={{ width: \"70%\", height: \"20rem\", margin: '10px' }} >\n                            <Card.Header>\n                                <Row>\n                                <Col sm={8} id=\"selected_piece\">\n                                    You are not picking\n                                </Col>\n                                <Col sm={4}>\n                                    <Button variant=\"danger\" style={{ float: \"right\"}} onClick={handle_cancel_select}><b>Cancel</b></Button>\n                                </Col>\n                                </Row>\n                                \n                            </Card.Header>\n                            <Card.Body style={{ overflow: \"auto\" }}>\n                                {\n                                    Object.keys(matchInfo.my_pocket).map((key, id) => {\n                                        return (\n                                            <Card.Text key={id}>\n                                                <Button data-piece={key} data-number={selectPieceState[`${key}`].number} disabled={selectPieceState[`${key}`].state} onClick={handle_pick_piece}>\n                                                    {key}: {selectPieceState[`${key}`].number}\n                                                </Button>\n                                            </Card.Text>\n                                        )\n                                    })\n                                }\n                                <Card.Text id=\"roll status\"></Card.Text>\n                            </Card.Body>\n                        </Card>\n                    </Col>\n                </Row>\n                \n            </Container>\n        </>\n    )\n}\n\n\nfunction Play() {\n\n    const { token, setToken } = useToken();\n    const [info, setInfo] = useState({});\n    const [matchInfo, setMatchInfo] = useState({});\n\n    useEffect(() => {\n        let ignore = false;\n\n        async function fetchData() {\n            if(!token) return;\n            if(ignore) return;\n            const user = await fetch(`http://localhost:8000/api/user/getinfo/?username=${token.username}`, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n            const user_data = await user.json();\n            setInfo({\n                username: user_data.username,\n                in_game: user_data.in_game,\n                number_of_matches: user_data.number_of_matches,\n                elo: user_data.elo\n            });\n        }\n\n        fetchData();\n        return () => { ignore = true; }        \n    }, []);\n\n    return (\n        <div>\n            {\n                (info.in_game)? \n                    <ShowBoard userInfo={info}/>\n                :\n                    <ViewPlayOption/>\n            }\n        </div>\n    )\n    \n}\n\nexport default Play;"],"mappings":"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"},"metadata":{},"sourceType":"module"}